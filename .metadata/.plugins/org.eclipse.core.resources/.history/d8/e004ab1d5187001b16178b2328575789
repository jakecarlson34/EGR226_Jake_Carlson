/**************************************************************************************
* Author: Jake Carlson
* Course: EGR 226 - 902
* Date: 03/17/2021
* Project: lab08part2
* File: part2main.c
* Description: This program controls the speed of a DC motor using Timer A.
*
*
*
**************************************************************************************/


#include "msp.h"
#include<stdlib.h>
#include<stdio.h>



void main(void)
{
    WDT_A->CTL = WDT_A_CTL_PW | WDT_A_CTL_HOLD;     // stop watchdog timer



    double dutyCyc = 25;
    uint16_t b;

    P2->SEL1 &=~BIT4;
    P2->SEL0 &=~BIT4;
    P2->DIR |= BIT4;

    TIMER_A0->CCR[0] = 1000-1;
    TIMER_A0->CCTL[1] = 0b0000000001110000 ;
    TIMER_A0->CCR[1] = 500;
    TIMER_A0->CTL = 0b0000001000010100;

    TIMER_A0->CTL = TASSEL_2 | MC_1| TACLR;
    TIMER_A0->CTL = 0x0214;

    while(1){
        b = ((dutyCyc/10)*37500);
        TIMER_A0->CCR[1] = b;


    }
}



